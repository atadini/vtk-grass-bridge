= HowTo compile the vtk-grass-bridge =

== Introduction ==

The vtk-grass-bridge and depends on cmake for configuration and several libraries. The two main libraries are *VTK* and *grass7*. Additionally gdal and proj4 libaries should be present. 

The vtk-grass-bridge works with VTK versions 5.2, 5.4, 5.6.Two optional features of the vtk-grass-bridge depend on VTK 5.9:
  * Temporal pipeline support
  * R-VTK interface

Do not use these optional features, they are in an experimental state and disabled by default.

Use always the latest grass7 svn version. The gdal and proj4 libraries should be available on your system via the package manager.

== Install CMake ==

You need cmake to configure the vtk-grass-bridge as well as VTK itself.
Use your package manager or download the latest version here: 

http://www.cmake.org/cmake/resources/software.html

Extract, compile and install cmake. On unix this simple shell script 
{{{
#!/bin/sh
wget http://www.cmake.org/files/v2.8/cmake-2.8.4.tar.gz
tar xzvf cmake-2.8.4.tar.gz 
cd cmake-2.8.4 
./configure --qt-gui && make && make install
}}}
should do the job.

== Compile GRASS GIS 7 ==

Download the latest grass7 svn version via svn from the osgeo server. You can use this script to do the job (pleas edit to your neededs):
{{{
#!/bin/sh
svn checkout https://svn.osgeo.org/grass/grass/trunk grass_trunk
cd grass_trunk
make distclean
export CFLAGS="-ggdb -Wall -Werror-implicit-function-declaration -fno-common -fopenmp"
export LDFLAGS="-lgomp"
./configure  --without-freetype --with-wxwidgets --with-sqlite --with-postgresql --with-cxx --with-python && make -j12
}}}

You don't need to install GRASS, the build directory contains a full functional grass installation.

== Install/Compile VTK ==

Use your package manager and install VTK. Python support should be enabled to run the vtk-grass-bridge tests. Optional Java support can be enabled to run the Java vtk-grass-bridge modules.

If no VTK package is available you need to compile VTK. Download the latests stable version here:
http://www.vtk.org/VTK/resources/software.html

Extract the sources in your source directory and create a new build directory (VTK_Build). Use cmake-gui to configure VTK. 
Enable shared library, Python and Java support. After configuration compile and install VTK on your computer(this may take a while). The default installation path is {{{/usr/local/lib/vtk-5.6}}} in case of VTK 5.6.
{{{
#!/bin/sh
mkdir VTK_5.6
cd VTK_5.6
wget http://www.vtk.org/files/release/5.6/vtk-5.6.1.tar.gz
tar xzvf vtk-5.6.1.tar.gz
mkdir VTK_Build
cd VTK_Build
cmake-gui ../VTK
make && make install
}}}
Here a screenshot of a valid VTK configuration:
http://vtk-grass-bridge.googlecode.com/files/vtk-cmake-gui.png

== Compile/Install vtk-grass-bridge ==  

After the compilation of grass7 and the installation of VTK you can configure and compile the vtk-grass-bridge.

Downlad the latest code via svn:
{{{
svn checkout http://vtk-grass-bridge.googlecode.com/svn/trunk/ vtk-grass-bridge
}}}
Create a new build directory:
{{{
mkdir vtk-grass-bridge_build_VTK5.6
}}}
Use cmake-gui to configure the vtk-grass-bridge. 
{{{
cd vtk-grass-bridge_build_VTK5.6
cmake-gui ../vtk-grass-bridge
}}}

The paths to your VTK installation, to the grass7 library and include directories as well as the gdal and proj4 libraries must be set. 
Have a look at this screenshot showing a valid configuration:

http://vtk-grass-bridge.googlecode.com/files/vtk-grass-bridge-cmake-gui.png

After configuration compile the sources on Unix with {{{make}}} and install them using {{{make install}}}. The libraries are insalled by default in {{{/usr/local/lib}}}.

To run the Python tests, examples and modules you need to set the python and library paths. Here an example for the bash:

{{{
export PYTHONPATH="/usr/local/lib/python2.6/site-packages/:/usr/local/lib"
export LD_LIBRARY_PATH="/usr/local/lib:/home/soeren/src/grass7.0/grass_trunk/dist.x86_64-unknown-linux-gnu/lib:/usr/local/lib/vtk-5.6"
}}}
